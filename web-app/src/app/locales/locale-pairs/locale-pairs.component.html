<div class="spinner centered" *ngIf="loading"></div>
<div *ngIf="!loading">

    <nav class="level">
        <div class="level-left">
            <div class="level-item">
                <h1 class="title is-5">
                    <span class="icon is-medium title-icon">
                        <i class="flag-icon flag-icon-{{locale.ident.slice(-2).toLowerCase()}}"></i></span>                    {{locale?.language}} ({{locale?.country}}) ({{locale?.ident}})
                </h1>

            </div>
        </div>
        <div class="level-right">
            <div class="level-item">
                <p>
                    <strong>{{percentTranslated}}%</strong> translated
                </p>
            </div>
            <div class="level-item">
                <div class="progress-container">
                    <progress class="progress is-primary is-fullwidth" value="{{percentTranslated}}" max="100"></progress>
                </div>
            </div>
            <div *ngIf="editable" class="level-item">
                <button class="button is-success" (click)="enableEdit()" [class.is-hidden]="editing">Edit</button>
                <button class="button is-success" (click)="commitPairs()" [class.is-hidden]="!editing">Commit</button>
                <button class="button is-danger" (click)="cancelEdit()" [class.is-hidden]="!editing">Cancel Edit</button>
            </div>
        </div>
    </nav>

    <table class="table is-bordered is-striped is-narrow">
        <thead>
            <tr>
                <th>Key</th>
                <th>Value</th>
            </tr>
        </thead>
        <tbody>

            <tr *ngFor="let pair of locale.pairs | objtopairs" [hidden]="!editable">
                <td>{{pair.key}}</td>
                <td><textarea class="textarea" (click)="enableEdit()" [disabled]="!editing" [(ngModel)]="locale.pairs[pair.key]">{{pair.value}}</textarea></td>
            </tr>

            <tr *ngFor="let pair of locale.pairs | objtopairs" [hidden]="editable">
                <td>{{pair.key}}</td>
                <td>{{pair.value}}</td>
            </tr>

        </tbody>
    </table>
</div>